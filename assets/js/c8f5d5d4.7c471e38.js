"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6372],{3968:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=s(4848),t=s(8453);const i={},l="stream_voice.py",a={id:"sunholo/senses/stream_voice",title:"stream_voice.py",description:"Source: sunholo/senses/streamvoice.py",source:"@site/docs/sunholo/senses/stream_voice.md",sourceDirName:"sunholo/senses",slug:"/sunholo/senses/stream_voice",permalink:"/docs/sunholo/senses/stream_voice",draft:!1,unlisted:!1,editUrl:"https://github.com/sunholo-data/sunholo-py/tree/main/docs/docs/sunholo/senses/stream_voice.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"retry.py",permalink:"/docs/sunholo/qna/retry"},next:{title:"streaming.py",permalink:"/docs/sunholo/streaming/"}},o={},c=[{value:"Functions",id:"functions",level:2},{value:"setup_tts_subparser(subparsers)",id:"setup_tts_subparsersubparsers",level:3},{value:"tts_command(args)",id:"tts_commandargs",level:3},{value:"Classes",id:"classes",level:2},{value:"StreamingTTS",id:"streamingtts",level:3}];function d(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"stream_voicepy",children:"stream_voice.py"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.em,{children:"Source"}),": ",(0,r.jsx)(n.a,{href:"https://github.com/sunholo-data/sunholo-py/blob/main/sunholo/senses/stream_voice.py",children:"sunholo/senses/stream_voice.py"})]}),"\n",(0,r.jsx)(n.h2,{id:"functions",children:"Functions"}),"\n",(0,r.jsx)(n.h3,{id:"setup_tts_subparsersubparsers",children:"setup_tts_subparser(subparsers)"}),"\n",(0,r.jsx)(n.p,{children:"Sets up an argparse subparser for the 'tts' command."}),"\n",(0,r.jsx)(n.p,{children:"Args:\nsubparsers: The subparsers object from argparse.ArgumentParser()."}),"\n",(0,r.jsx)(n.h3,{id:"tts_commandargs",children:"tts_command(args)"}),"\n",(0,r.jsx)(n.p,{children:"Executes the TTS command based on parsed arguments."}),"\n",(0,r.jsx)(n.p,{children:"Args:\nargs: The parsed command-line arguments."}),"\n",(0,r.jsx)(n.h2,{id:"classes",children:"Classes"}),"\n",(0,r.jsx)(n.h3,{id:"streamingtts",children:"StreamingTTS"}),"\n",(0,r.jsx)(n.h1,{id:"example-usage",children:"Example usage"}),"\n",(0,r.jsx)(n.p,{children:'def sample_text_stream():\nsentences = [\n"Hello, this is a test of streaming text to speech.",\n"Each sentence will be converted to audio separately.",\n"This allows for lower latency in long-form text to speech conversion."\n]\nfor sentence in sentences:\nyield sentence\ntime.sleep(0.5)  # Simulate delay between text chunks'}),"\n",(0,r.jsx)(n.h1,{id:"initialize-and-run",children:"Initialize and run"}),"\n",(0,r.jsx)(n.p,{children:"tts = StreamingTTS()\ntts.process_text_stream(sample_text_stream())"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"del"}),"(self)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cleanup method to ensure stream is closed."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"init"}),"(self)"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Initialize self.  See help(type(self)) for accurate signature."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"_apply_fade(self, audio: numpy.ndarray, fade_duration: float, fade_in: bool = True, fade_out: bool = True) -> numpy.ndarray"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Apply fade in/out to audio with specified duration."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"_initialize_audio_device(self)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Initialize audio device with proper settings."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"_make_fade(self, length: int, fade_type: str = 'l') -> numpy.ndarray"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Generate a fade curve of specified length and type."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"_play_audio_chunk(self, audio_chunk: numpy.ndarray, is_final_chunk: bool = False)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Play a single audio chunk with proper device handling."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"audio_player(self)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Continuously play audio chunks from the queue."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"generate_audio_stream(self, text)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Generate a stream of audio data from a text chunk.\nReturns audio in WAV format for streaming."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Args:\ntext (str): Text to convert to speech"}),"\n",(0,r.jsx)(n.p,{children:"Yields:\nbytes: WAV-formatted audio data"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"process_text_stream(self, text_generator)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Process incoming text stream and convert to audio."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"save_to_file(self, text_generator, output_path)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Save the audio to a WAV file with minimal fading."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"set_language(self, language_code: str)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set the language for text-to-speech conversion."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Args:\nlanguage_code: Language code in BCP-47 format (e.g., 'en-US', 'es-ES', 'fr-FR')"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["set_voice(self, voice_name: str)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set the language for text-to-speech conversion."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Args:\nlanguage_code: Language code in BCP-47 format (e.g., 'en-US', 'es-ES', 'fr-FR')"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["set_voice_gender(self, gender: str)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set the voice gender for text-to-speech conversion."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Args:\ngender: One of 'NEUTRAL', 'MALE', or 'FEMALE'"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["text_to_audio(self, text)","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Convert text chunk to audio bytes using Google Cloud TTS."}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(6540);const t={},i=r.createContext(t);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);